{"ast":null,"code":"import{useState}from'react';import{useLoaderData}from'react-router-dom';import React from'react';/*\nITP 404, Midterm\nAuthor: Carson Wang\nEmail: carsonw@usc.edu\nThis file load the details for the meal that user selected;\nAllow user to load comments/ add comments (including error check)\n*/import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function details(){// Fetch the meal data using react-router's useLoaderData hook\nconst mealDetails=useLoaderData();// State to hold reviews: Array\nconst[reviewList,setReviewList]=useState([]);// State to handle review submission text\nconst[userInput,setUserInput]=useState('');// State to handle errors (like if a review isn't filled out)\nconst[errorMessage,setErrorMessage]=useState(null);// Helper function to render reviews\nconst renderReviews=()=>{// If there are reviews, return them in a list\nif(reviewList.length>0){return/*#__PURE__*/_jsx(\"ul\",{children:reviewList.map((review,i)=>/*#__PURE__*/_jsx(\"li\",{children:review},i))});}// If no reviews, return a prompt\nreturn/*#__PURE__*/_jsx(\"p\",{children:\"No reviews yet. Be the first!\"});};return/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[mealDetails.name,\" (\",mealDetails.category,\")\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"meal-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Total ingredients: \",mealDetails.ingredients.length]}),/*#__PURE__*/_jsx(\"p\",{children:mealDetails.ingredients.join(', ')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviews\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"noreview\",children:renderReviews()}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:event=>{event.preventDefault();// Check if the user input is not empty\nif(userInput){// Add the user input to the reviews list\nsetReviewList(prevReviews=>[...prevReviews,userInput]);// Clear user input and reset any error messages\nsetUserInput('');setErrorMessage(null);}else{// Set an error message if the user input is empty\nsetErrorMessage('Please type a review...');}},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"userReview\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"review\",className:\"form-label\",children:\"Review\"})}),/*#__PURE__*/_jsx(\"textarea\",{className:\"c\",rows:\"4\",value:userInput,onChange:event=>{setUserInput(event.target.value);}}),errorMessage?/*#__PURE__*/_jsx(\"div\",{className:\"errorMessage\",children:errorMessage}):null]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Submit\"})]})]})]});}","map":{"version":3,"names":["useState","useLoaderData","React","jsx","_jsx","jsxs","_jsxs","details","mealDetails","reviewList","setReviewList","userInput","setUserInput","errorMessage","setErrorMessage","renderReviews","length","children","map","review","i","className","name","category","ingredients","join","onSubmit","event","preventDefault","prevReviews","htmlFor","rows","value","onChange","target","type"],"sources":["/Users/carson/Downloads/react-lxufmk/src/routes/details.js"],"sourcesContent":["import { useState } from 'react';\nimport { useLoaderData } from 'react-router-dom';\nimport React from 'react';\n\n/*\nITP 404, Midterm\nAuthor: Carson Wang\nEmail: carsonw@usc.edu\nThis file load the details for the meal that user selected;\nAllow user to load comments/ add comments (including error check)\n*/\n\nexport default function details() {\n  // Fetch the meal data using react-router's useLoaderData hook\n  const mealDetails = useLoaderData();\n\n  // State to hold reviews: Array\n  const [reviewList, setReviewList] = useState([]);\n\n  // State to handle review submission text\n  const [userInput, setUserInput] = useState('');\n\n  // State to handle errors (like if a review isn't filled out)\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  // Helper function to render reviews\n  const renderReviews = () => {\n    // If there are reviews, return them in a list\n    if (reviewList.length > 0) {\n      return (\n        <ul>\n          {reviewList.map((review, i) => (\n            <li key={i}>{review}</li>\n          ))}\n        </ul>\n      );\n    }\n    // If no reviews, return a prompt\n    return <p>No reviews yet. Be the first!</p>;\n  };\n\n  return (\n    <div className=\"page\">\n      <div className=\"title\">\n        <h1>\n          {mealDetails.name} ({mealDetails.category})\n        </h1>\n      </div>\n\n      <div className=\"meal-details\">\n        <p>Total ingredients: {mealDetails.ingredients.length}</p>\n        <p>{mealDetails.ingredients.join(', ')}</p>\n      </div>\n\n      <div className=\"reviews\">\n        {/* Display reviews if they exist, otherwise display a prompt */}\n        <div className=\"noreview\">{renderReviews()}</div>\n\n        {/* Review submission form */}\n        <form\n          onSubmit={(event) => {\n            event.preventDefault();\n\n            // Check if the user input is not empty\n            if (userInput) {\n              // Add the user input to the reviews list\n              setReviewList((prevReviews) => [...prevReviews, userInput]);\n\n              // Clear user input and reset any error messages\n              setUserInput('');\n              setErrorMessage(null);\n            } else {\n              // Set an error message if the user input is empty\n              setErrorMessage('Please type a review...');\n            }\n          }}\n        >\n          <div className=\"userReview\">\n            <p><label htmlFor=\"review\" className=\"form-label\">\n              Review\n            </label></p>\n            <textarea\n              className=\"c\"\n              rows=\"4\"\n              value={userInput}\n              onChange={(event) => {\n                setUserInput(event.target.value);\n              }}\n            />\n\n            {/* Display error message if it exists */}\n            {errorMessage ? (\n              <div className=\"errorMessage\">{errorMessage}</div>\n            ) : null}\n          </div>\n\n          <button type=\"submit\" className=\"btn btn-primary\">\n            Submit\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}