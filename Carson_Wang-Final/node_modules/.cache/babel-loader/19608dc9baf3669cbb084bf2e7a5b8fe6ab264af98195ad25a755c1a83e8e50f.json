{"ast":null,"code":"import _toConsumableArray from\"/Users/carson/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/carson/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{useLoaderData}from'react-router-dom';import React from'react';/*\nITP 404, Midterm\nAuthor: Carson Wang\nEmail: carsonw@usc.edu\nThis file load the details for the meal that user selected;\nAllow user to load comments/ add comments (including error check)\n*/import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function details(){// Fetch the meal data using react-router's useLoaderData hook\nvar mealDetails=useLoaderData();// State to hold reviews: Array\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),reviewList=_useState2[0],setReviewList=_useState2[1];// State to handle review submission text\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),userInput=_useState4[0],setUserInput=_useState4[1];// State to handle errors (like if a review isn't filled out)\nvar _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];// Helper function to render reviews\nvar renderReviews=function renderReviews(){// If there are reviews, return them in a list\nif(reviewList.length>0){return/*#__PURE__*/_jsx(\"ul\",{children:reviewList.map(function(review,i){return/*#__PURE__*/_jsx(\"li\",{children:review},i);})});}// If no reviews, return a prompt\nreturn/*#__PURE__*/_jsx(\"p\",{children:\"No reviews yet. Be the first!\"});};return/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[mealDetails.name,\" (\",mealDetails.category,\")\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"meal-details\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Total ingredients: \",mealDetails.ingredients.length]}),/*#__PURE__*/_jsx(\"p\",{children:mealDetails.ingredients.join(', ')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"reviews\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"noreview\",children:renderReviews()}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){event.preventDefault();// Check if the user input is not empty\nif(userInput){// Add the user input to the reviews list\nsetReviewList(function(prevReviews){return[].concat(_toConsumableArray(prevReviews),[userInput]);});// Clear user input and reset any error messages\nsetUserInput('');setErrorMessage(null);}else{// Set an error message if the user input is empty\nsetErrorMessage('Please type a review...');}},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"userReview\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"review\",className:\"form-label\",children:\"Review\"})}),/*#__PURE__*/_jsx(\"textarea\",{className:\"c\",rows:\"4\",value:userInput,onChange:function onChange(event){setUserInput(event.target.value);}}),errorMessage?/*#__PURE__*/_jsx(\"div\",{className:\"errorMessage\",children:errorMessage}):null]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Submit\"})]})]})]});}","map":{"version":3,"names":["useState","useLoaderData","React","jsx","_jsx","jsxs","_jsxs","details","mealDetails","_useState","_useState2","_slicedToArray","reviewList","setReviewList","_useState3","_useState4","userInput","setUserInput","_useState5","_useState6","errorMessage","setErrorMessage","renderReviews","length","children","map","review","i","className","name","category","ingredients","join","onSubmit","event","preventDefault","prevReviews","concat","_toConsumableArray","htmlFor","rows","value","onChange","target","type"],"sources":["/Users/carson/Downloads/react-lxufmk/src/routes/details.js"],"sourcesContent":["import { useState } from 'react';\nimport { useLoaderData } from 'react-router-dom';\nimport React from 'react';\n\n/*\nITP 404, Midterm\nAuthor: Carson Wang\nEmail: carsonw@usc.edu\nThis file load the details for the meal that user selected;\nAllow user to load comments/ add comments (including error check)\n*/\n\nexport default function details() {\n  // Fetch the meal data using react-router's useLoaderData hook\n  const mealDetails = useLoaderData();\n\n  // State to hold reviews: Array\n  const [reviewList, setReviewList] = useState([]);\n\n  // State to handle review submission text\n  const [userInput, setUserInput] = useState('');\n\n  // State to handle errors (like if a review isn't filled out)\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  // Helper function to render reviews\n  const renderReviews = () => {\n    // If there are reviews, return them in a list\n    if (reviewList.length > 0) {\n      return (\n        <ul>\n          {reviewList.map((review, i) => (\n            <li key={i}>{review}</li>\n          ))}\n        </ul>\n      );\n    }\n    // If no reviews, return a prompt\n    return <p>No reviews yet. Be the first!</p>;\n  };\n\n  return (\n    <div className=\"page\">\n      <div className=\"title\">\n        <h1>\n          {mealDetails.name} ({mealDetails.category})\n        </h1>\n      </div>\n\n      <div className=\"meal-details\">\n        <p>Total ingredients: {mealDetails.ingredients.length}</p>\n        <p>{mealDetails.ingredients.join(', ')}</p>\n      </div>\n\n      <div className=\"reviews\">\n        {/* Display reviews if they exist, otherwise display a prompt */}\n        <div className=\"noreview\">{renderReviews()}</div>\n\n        {/* Review submission form */}\n        <form\n          onSubmit={(event) => {\n            event.preventDefault();\n\n            // Check if the user input is not empty\n            if (userInput) {\n              // Add the user input to the reviews list\n              setReviewList((prevReviews) => [...prevReviews, userInput]);\n\n              // Clear user input and reset any error messages\n              setUserInput('');\n              setErrorMessage(null);\n            } else {\n              // Set an error message if the user input is empty\n              setErrorMessage('Please type a review...');\n            }\n          }}\n        >\n          <div className=\"userReview\">\n            <p><label htmlFor=\"review\" className=\"form-label\">\n              Review\n            </label></p>\n            <textarea\n              className=\"c\"\n              rows=\"4\"\n              value={userInput}\n              onChange={(event) => {\n                setUserInput(event.target.value);\n              }}\n            />\n\n            {/* Display error message if it exists */}\n            {errorMessage ? (\n              <div className=\"errorMessage\">{errorMessage}</div>\n            ) : null}\n          </div>\n\n          <button type=\"submit\" className=\"btn btn-primary\">\n            Submit\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}